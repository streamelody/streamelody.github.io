I"û8<h1 id="proxmox-ve-ç›¸å…³é…ç½®">ProxMox VE ç›¸å…³é…ç½®</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># é…ç½®åˆ†è¾¨ç‡</span>
<span class="c"># åœ¨ /etc/pve/qemu-server/xxx.conf æœ€ååŠ å…¥ä»¥ä¸‹ä»£ç </span>
vga: vmware

<span class="c"># ISO é•œåƒä¸Šä¼ ç›®å½•</span>
/var/lib/vz/template/iso

<span class="c"># å¤‡ä»½ç›®å½•</span>
/var/lib/vz/dump
</code></pre></div></div>

<!--more-->

<h1 id="é…ç½®-frp-å®¢æˆ·ç«¯">é…ç½® FRP å®¢æˆ·ç«¯</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># ç›´æ¥åœ¨ ProxMox VE çš„ Shell ä¸‹é…ç½®</span>
<span class="c"># ä¸‹è½½ 64 ä½ Linux ç‰ˆ frp</span>
wget https://github.com/fatedier/frp/releases/download/v0.27.0/frp_0.27.0_linux_amd64.tar.gz
<span class="c"># è§£å‹</span>
<span class="nb">tar</span> <span class="nt">-zxvf</span> frp_0.27.0_linux_amd64.tar.gz
<span class="c"># èµ‹äºˆæƒé™</span>
<span class="nb">cd </span>frp_0.27.0_linux_amd64
<span class="nb">chmod</span> +x frpc
<span class="c"># å°† frpc æ”¾åˆ° /usr/bin/ ç›®å½•ä¸‹</span>
<span class="nb">cp </span>frpc /usr/bin/
<span class="c"># å°†é…ç½®æ–‡ä»¶å¤åˆ¶åˆ°å¯¹åº”çš„é…ç½®æ–‡ä»¶ç›®å½•</span>
<span class="nb">mkdir</span> /etc/frp/
<span class="nb">cp </span>frpc.ini /etc/frp/

<span class="c"># frpc.ini é…ç½®ç¤ºä¾‹ï¼Œè¿™é‡Œå…¼å®¹ N1 å°é’¢ç‚® FRP çš„è®¾ç½®</span>
<span class="c"># frps.ini æœåŠ¡ç«¯é…ç½®å‚è€ƒè¿™é‡Œï¼šhttps://streamelody.github.io/2019/04/n1-disk-mangaer-frp-update/</span>
<span class="o">[</span>common]
server_addr <span class="o">=</span> æœåŠ¡ç«¯ IP åœ°å€
server_port <span class="o">=</span> 7000
log_file <span class="o">=</span> /var/log/frpc.log
log_level <span class="o">=</span> info
log_max_days <span class="o">=</span> 3
token <span class="o">=</span> 12345678
admin_addr <span class="o">=</span> 127.0.0.1
admin_port <span class="o">=</span> 7400
admin_user <span class="o">=</span> admin
admin_passwd <span class="o">=</span> admin
pool_count <span class="o">=</span> 5
tcp_mux <span class="o">=</span> <span class="nb">true
</span>login_fail_exit <span class="o">=</span> <span class="nb">false
</span>protocol <span class="o">=</span> tcp
heartbeat_interval <span class="o">=</span> 10
heartbeat_timeout <span class="o">=</span> 90

<span class="o">[</span>ssh]
<span class="nb">type</span> <span class="o">=</span> tcp
local_ip <span class="o">=</span> 192.168.2.117
local_port <span class="o">=</span> 22
remote_port <span class="o">=</span> 6000

<span class="o">[</span>pve]
<span class="nb">type</span> <span class="o">=</span> https
local_ip <span class="o">=</span> 192.168.2.117
local_port <span class="o">=</span> 8006
use_encryption <span class="o">=</span> <span class="nb">true
</span>use_compression <span class="o">=</span> <span class="nb">true
</span>subdomain <span class="o">=</span> pve

<span class="c"># ä½¿ç”¨ systemd é…ç½®å¼€æœºè‡ªå¯</span>
vi /etc/systemd/system/frpc.service
<span class="c"># ä»¥ä¸‹æ˜¯é…ç½®æ–‡ä»¶</span>
<span class="o">[</span>Unit]
<span class="nv">Description</span><span class="o">=</span>FRP Client Daemon
<span class="nv">After</span><span class="o">=</span>network.target
<span class="nv">Wants</span><span class="o">=</span>network.target

<span class="o">[</span>Service]
<span class="nv">Type</span><span class="o">=</span>simple
<span class="nv">ExecStart</span><span class="o">=</span>/usr/bin/frpc <span class="nt">-c</span> /etc/frp/frpc.ini
<span class="nv">Restart</span><span class="o">=</span>always
<span class="nv">RestartSec</span><span class="o">=</span>20s
<span class="nv">User</span><span class="o">=</span>nobody

<span class="o">[</span>Install]
<span class="nv">WantedBy</span><span class="o">=</span>multi-user.target

<span class="c"># å¼€æœºå¯åŠ¨ frp å®¢æˆ·ç«¯</span>
systemctl <span class="nb">enable </span>frpc

<span class="c"># é‡å¯å’ŒæŸ¥çœ‹ frp å®¢æˆ·ç«¯çŠ¶æ€</span>
systemctl restart frpc
systemctl status frpc
ps <span class="nt">-e</span> | <span class="nb">grep </span>frpc
</code></pre></div></div>

<h1 id="ubuntu-è™šæ‹Ÿæœºé…ç½®">Ubuntu è™šæ‹Ÿæœºé…ç½®</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å‚è€ƒè¿™ç¯‡æ–‡ç« å¯ä»¥å®‰è£… Ubuntu</span>
<span class="c"># https://www.kclouder.cn/proxmox-ve-installation/</span>

<span class="c"># ISO é•œåƒå¿…é¡»é€šè¿‡ Web æ§åˆ¶å°ä¸Šä¼ ï¼Œä»¥ä¸‹ä¸ºå…¶ä½ç½®</span>
/var/lib/vz/template/iso

<span class="c">#å¤‡ä»½ç›®å½•ä¸€èˆ¬åœ¨ </span>
/var/lib/vz/dump

<span class="c"># åˆ›å»ºè™šæ‹Ÿæœºæ—¶ï¼Œç¡¬ç›˜é€‰ SATAï¼Œç½‘ç»œé€‰ Intel E1000</span>
<span class="c"># æŸ¥çœ‹æ–‡ä»¶å¤§å°</span>
<span class="nb">ls</span> <span class="nt">-lht</span>

<span class="c"># é»˜è®¤æ˜¯æ²¡æœ‰å®‰è£… SSH Server</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>openssh-server  
ps <span class="nt">-e</span> | <span class="nb">grep </span>ssh

<span class="c"># å¼€å¯æ¡Œé¢å…±äº«</span>
<span class="nb">sudo </span>apt <span class="nb">install </span>vino
<span class="c"># åœ¨ç»ˆç«¯æ‰§è¡Œï¼Œ"your_password"ä¿®æ”¹ä¸ºè‡ªå·±çš„å¯†ç </span>
<span class="nb">export </span><span class="nv">DISPLAY</span><span class="o">=</span><span class="s2">":0"</span>
gsettings <span class="nb">set </span>org.gnome.Vino require-encryption <span class="nb">false
</span>gsettings <span class="nb">set </span>org.gnome.Vino prompt-enabled <span class="nb">false
</span>gsettings <span class="nb">set </span>org.gnome.Vino authentication-methods <span class="s2">"['vnc']"</span>
gsettings <span class="nb">set </span>org.gnome.Vino vnc-password <span class="s2">"</span><span class="si">$(</span><span class="nb">echo</span> <span class="nt">-n</span> <span class="s2">"your_password"</span> | <span class="nb">base64</span><span class="si">)</span><span class="s2">"</span>

<span class="c"># é…ç½®å¼€æœºè‡ªå¯</span>
<span class="nb">sudo </span>vi /etc/xdg/autostart/vino-server.desktop
<span class="c"># ä»¥ä¸‹æ˜¯é…ç½®æ–‡ä»¶</span>
<span class="o">[</span>Desktop Entry]
<span class="nv">Name</span><span class="o">=</span>Desktop Sharing
<span class="nv">Comment</span><span class="o">=</span>GNOME Desktop Sharing Server
<span class="nv">Keywords</span><span class="o">=</span>vnc<span class="p">;</span>share<span class="p">;</span>remote<span class="p">;</span>
<span class="nv">NoDisplay</span><span class="o">=</span><span class="nb">true
</span><span class="nv">Exec</span><span class="o">=</span>/usr/lib/vino/vino-server <span class="nt">--sm-disable</span>
<span class="nv">Icon</span><span class="o">=</span>preferences-desktop-remote-desktop
<span class="nv">Terminal</span><span class="o">=</span><span class="nb">false
</span><span class="nv">Type</span><span class="o">=</span>Application
X-GNOME-Autostart-Phase<span class="o">=</span>Applications
X-GNOME-AutoRestart<span class="o">=</span><span class="nb">true
</span>X-GNOME-UsesNotifications<span class="o">=</span><span class="nb">true
</span>X-Ubuntu-Gettext-Domain<span class="o">=</span>vino
</code></pre></div></div>

<h1 id="ubuntu-å®‰è£…-docker">Ubuntu å®‰è£… Docker</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># è§£å†³ä¾èµ–</span>
<span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="se">\</span>
    apt-transport-https <span class="se">\</span>
    ca-certificates <span class="se">\</span>
    curl <span class="se">\</span>
    gnupg2 <span class="se">\</span>
    software-properties-common
    
<span class="c"># å®‰è£… GPG Key</span>
curl <span class="nt">-fsSL</span> https://download.docker.com/linux/ubuntu/gpg | <span class="nb">sudo </span>apt-key add -
   
<span class="c"># å®‰è£… Docker    </span>
<span class="nb">sudo </span>apt-get update
<span class="nb">sudo </span>apt <span class="nb">install </span>docker.io

<span class="c"># å°†å½“å‰ç”¨æˆ·åŠ å…¥ Docker ç”¨æˆ·ç»„ï¼Œé€€å‡ºç”¨æˆ·ï¼Œé‡æ–°ç™»å½•ï¼ˆå…³é”®ï¼‰ã€‚</span>
<span class="nb">sudo </span>usermod <span class="nt">-aG</span> docker <span class="k">${</span><span class="nv">USER</span><span class="k">}</span>

<span class="c"># æµ‹è¯•</span>
docker <span class="nt">--version</span>
</code></pre></div></div>

<h1 id="å¯ç”¨åµŒå¥—è™šæ‹ŸåŒ–">å¯ç”¨åµŒå¥—è™šæ‹ŸåŒ–</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># SSH è¿›å…¥ ProxMoxï¼ŒæŸ¥çœ‹æ˜¯å¦å¼€å¯åµŒå¥—è™šæ‹ŸåŒ–ï¼Œæ˜¾ç¤º â€œNâ€ è¡¨ç¤ºæ²¡æœ‰å¼€å¯</span>
<span class="nb">cat</span> /sys/module/kvm_intel/parameters/nested

<span class="c"># é¦–å…ˆå…³é—­æ‰€æœ‰è™šæ‹Ÿæœº</span>
qm list
qm stop &lt;vm_id&gt;

<span class="c"># å¼€å¯å†…æ ¸æ”¯æŒï¼Œå¼€å¯ä¹‹å‰ç¡®ä¿æ‰€æœ‰çš„è™šæ‹Ÿæœºå·²ç»å…³é—­</span>
modprobe <span class="nt">-r</span> kvm_intel  
modprobe kvm_intel <span class="nv">nested</span><span class="o">=</span>1

<span class="c"># å†æ¬¡æŸ¥çœ‹æ˜¯å¦å·²ç»å¼€å¯ï¼Œæ˜¾ç¤º â€œYâ€ è¡¨ç¤ºå·²ç»å¼€å¯</span>
<span class="nb">cat</span> /sys/module/kvm_intel/parameters/nested

<span class="c"># ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼Œé‡å¯èƒ½å¤Ÿè‡ªåŠ¨åŠ è½½</span>
<span class="nb">echo</span> <span class="s2">"options kvm_intel nested=1"</span> <span class="o">&gt;&gt;</span> /etc/modprobe.d/modprobe.conf

<span class="c"># åœ¨ /etc/pve/qemu-server/ ä¸‹çš„é…ç½®æ–‡ä»¶æ·»åŠ å‘½ä»¤</span>
args: <span class="nt">-cpu</span> +vmx

<span class="c"># å¯åŠ¨ macOS Mojave è™šæ‹Ÿæœºï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span>
sysctl <span class="nt">-a</span> | <span class="nb">grep </span>machdep.cpu.features

<span class="c"># Linux æ‰§è¡Œä»¥ä¸‹å‘½ä»¤</span>
egrep <span class="s2">"vmx|svm"</span> /proc/cpuinfo 

<span class="c"># å¾—åˆ°ç»“æœï¼Œå½“ç»“æœåŒ…å« VMX æ—¶ï¼Œè¡¨ç¤ºå·²ç»æˆåŠŸå¼€å¯åµŒå¥—è™šæ‹ŸåŒ–</span>
machdep.cpu.features: FPU VME DE PSE TSC MSR PAE MCE CX8 APIC SEP MTRR PGE MCA CMOV PAT PSE36 CLFSH MMX FXSR SSE SSE2 HTT SSE3 VMX SSSE3 CX16 SSE4.1 SSE4.2 x2APIC POPCNT AES VMM PCID XSAVE
</code></pre></div></div>

<h1 id="å¼€æœºè‡ªåŠ¨æŒ‚è½½-nfs">å¼€æœºè‡ªåŠ¨æŒ‚è½½ NFS</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># å®‰è£… nfs-common</span>
<span class="nb">sudo </span>apt-get <span class="nb">install </span>nfs-common

<span class="c"># æŸ¥çœ‹å…±äº«çš„ç›®å½•</span>
showmount <span class="nt">-e</span> 192.168.2.109

<span class="c"># åˆ›å»ºæœ¬åœ°çš„æŒ‚è½½ç›®å½•</span>
<span class="nb">mkdir</span> <span class="nt">-p</span> /mnt/Downloads

<span class="c"># æŒ‚è½½å‘½ä»¤</span>
mount 192.168.2.109:/Volumes/Downloads /mnt/Downloads

<span class="c"># å¼€æœºè‡ªåŠ¨æŒ‚è½½</span>
<span class="nb">sudo </span>vim /etc/fstab
192.168.2.109:/Volumes/Downloads /mnt/Downloads nfs defaults 0 2
<span class="c"># ç¬¬ä¸€ä¸ªæ•°å­—ï¼š0 è¡¨ç¤ºå¼€æœºä¸æ£€æŸ¥ç£ç›˜ï¼Œ1 è¡¨ç¤ºå¼€æœºæ£€æŸ¥ç£ç›˜ã€‚</span>
<span class="c"># ç¬¬äºŒä¸ªæ•°å­—ï¼š0 è¡¨ç¤ºäº¤æ¢åˆ†åŒºï¼Œ1 ä»£è¡¨å¯åŠ¨åˆ†åŒºï¼ˆLinuxï¼‰ï¼Œ2 è¡¨ç¤ºæ™®é€šåˆ†åŒºã€‚</span>
</code></pre></div></div>

<h1 id="ubuntu-vps-æ­å»º-gnome-æ¡Œé¢ä»¥åŠä½¿ç”¨-vnc-è¿æ¥">Ubuntu VPS æ­å»º Gnome æ¡Œé¢ä»¥åŠä½¿ç”¨ VNC è¿æ¥</h1>

<div class="language-shell highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># æ­å»º Gnome æ¡Œé¢</span>

<span class="c"># ä½¿ç”¨ SSH ç™»å½•æœåŠ¡å™¨</span>
<span class="c"># æ›´æ–°æºåŠç³»ç»Ÿ</span>
apt-get update
apt upgrade <span class="nt">-y</span>

<span class="c"># å®‰è£…æ¡Œé¢ç¯å¢ƒï¼Œå®Œæ•´ç‰ˆ(ä¸æ¨è)</span>
apt-get <span class="nb">install </span>ubuntu-desktop gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal

<span class="c"># å®‰è£…æ¡Œé¢ç¯å¢ƒæ ¸å¿ƒç»„ä»¶ï¼Œä¸å®‰è£…å¦‚ office ç­‰é¢å¤–ç»„ä»¶</span>
apt-get <span class="nb">install</span> <span class="nt">--no-install-recommends</span> ubuntu-desktop gnome-panel gnome-settings-daemon metacity nautilus gnome-terminal <span class="nt">-y</span>

<span class="c"># å®‰è£… vnc4server</span>
apt-get <span class="nb">install </span>vnc4server

<span class="c"># è®¾ç½®å½“å‰ç”¨æˆ· vnc å¯†ç </span>
vncpasswd

<span class="c"># å¯åŠ¨ vncserverï¼Œä¹‹å‰æ²¡æœ‰è®¾ç½®å¯†ç è¿™é‡Œä¼šè¦æ±‚è®¾ç½®å¯†ç </span>
<span class="c"># ":1" ä»£è¡¨ display å·ï¼Œvncserver çš„ç«¯å£å·ä¸º 5900 + display å·ï¼Œè¿™é‡Œä¸º 5901</span>
vncserver :1

<span class="c"># ç»“æŸ vncserver</span>
vncserver <span class="nt">-kill</span> :1

<span class="c"># ä¿®æ”¹é…ç½®æ–‡ä»¶ xstartup</span>
vim ~/.vnc/xstartup

<span class="c"># è¿™é‡Œæ˜¯ xstartup é…ç½®æ–‡ä»¶å†…å®¹</span>
<span class="c">#!/bin/sh</span>

<span class="nb">export </span><span class="nv">XKL_XMODMAP_DISABLE</span><span class="o">=</span>1
<span class="nb">unset </span>SESSION_MANAGER
<span class="nb">unset </span>DBUS_SESSION_BUS_ADDRESS

gnome-panel &amp;
gnmoe-settings-daemon &amp;
metacity &amp;
nautilus &amp;
gnome-terminal &amp;

<span class="c"># é‡æ–°èµ‹äºˆä¸€ä¸‹æƒé™</span>
<span class="nb">chmod </span>777 ~/.vnc/xstartup

<span class="c"># é‡æ–°å¯åŠ¨ vncserver</span>
vncserver :1

<span class="c"># é…ç½®å¼€æœºå¯åŠ¨</span>
<span class="c"># æ‰“å¼€crontabä»»åŠ¡</span>
crontab <span class="nt">-e</span>

<span class="c"># å¦èµ·ä¸€è¡Œï¼Œè¾“å…¥ä»¥ä¸‹å‘½ä»¤</span>
@reboot /usr/bin/vncserver :1

<span class="c"># ä½¿ç”¨ VNC è¿æ¥</span>
vnc://server_ip_address:5901
</code></pre></div></div>

<h1 id="å‚è€ƒæ–‡ç« ">å‚è€ƒæ–‡ç« </h1>

<ol>
  <li><a href="https://www.kclouder.cn/proxmox-ve-installation/">Proxmox VE å®‰è£…ä»‹ç»</a></li>
  <li><a href="https://blog.csdn.net/Fate10_55/article/details/78182799Proxmox">Proxmoxç¯å¢ƒä¸‹ Ubuntu16.04 + CUDA 8.0 GA2 å®‰è£…</a></li>
  <li><a href="https://blog.csdn.net/Fate10_55/article/details/78194817">Proxmox + Ubuntu16.04 + CUDA 8.0 ç¯å¢ƒä¸‹ï¼Œå®‰è£…Tensorflow</a></li>
  <li><a href="https://www.reddit.com/r/linuxmint/comments/9ilpkx/mint_19_cinnamon_remote_access_vnc/">Mint 19 Cinnamon / Remote Access</a></li>
  <li><a href="https://zocodev.com/debian9-frp-internal-network-penetration.html">Debian9ç³»ç»Ÿä½¿ç”¨FRPå†…ç½‘ç©¿é€</a></li>
  <li><a href="https://it.ismy.fun/2019/01/18/linuxmint-install-docker/">Linux Mint 19 Tara å®‰è£… Docker CE</a></li>
  <li><a href="https://my.oschina.net/u/1440971/blog/2996084">ubuntu 18.04 å®‰è£…NFS å…±äº«æ–‡ä»¶å¤¹,LinuxæŒ‚è½½ï¼ŒMac æŒ‚è½½</a></li>
  <li><a href="https://blog.csdn.net/wwq_1111/article/details/46502873">Ubuntu14.04ä½¿ç”¨VNCæ— æ³•æ˜¾ç¤ºå›¾å½¢ç•Œé¢é—®é¢˜çš„è§£å†³</a></li>
  <li><a href="https://blog.csdn.net/u014389734/article/details/79513517">Ubuntu16.04 ç”¨VNCé“¾æ¥ GNOME æ¡Œé¢</a></li>
</ol>
:ET